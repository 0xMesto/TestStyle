<header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300" data-header>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center py-4">
      <a href="#" class="flex items-center space-x-2 group" data-aos="fade-right">
        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center transform transition-all duration-300 group-hover:rotate-12 shadow-lg group-hover:shadow-xl overflow-hidden">
          <span class="text-white font-bold text-2xl relative z-10">EA</span>
          <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
        </div>
        <span class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-500 hidden sm:inline-block">Edward Alouani</span>
      </a>
      
      <nav class="hidden md:flex space-x-8">
        <% ['Home', 'Services', 'Portfolio', 'Process', 'About', 'Contact'].forEach((item, index) => { %>
          <a href="#<%= item.toLowerCase() %>" class="text-gray-300 hover:text-white transition-colors duration-300 relative group text-lg" data-aos="fade-down" data-aos-delay="<%= 100 * (index + 1) %>">
            <%= item %>
            <span class="absolute left-0 right-0 bottom-0 h-0.5 bg-gradient-to-r from-indigo-400 to-purple-500 transform scale-x-0 transition-transform duration-300 group-hover:scale-x-100"></span>
          </a>
        <% }) %>
      </nav>
      
      <div class="flex items-center space-x-4">
        <a href="#contact" class="hidden md:inline-block bg-gradient-to-r from-pink-500 to-purple-600 text-white font-semibold py-2 px-6 rounded-full transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg hover:from-pink-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 group" data-aos="fade-left">
          <span class="relative z-10">Start Project</span>
          <div class="absolute inset-0 rounded-full bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
        </a>
        <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 rounded-lg p-2 transition-colors duration-300 hover:bg-white hover:bg-opacity-10">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
  
  <!-- Mobile Menu -->
  <div id="mobile-menu" class="md:hidden hidden bg-gradient-to-r from-indigo-900 via-purple-900 to-pink-900 bg-opacity-95 backdrop-filter backdrop-blur-lg">
    <div class="container mx-auto px-4 py-4">
      <% ['Home', 'Services', 'Portfolio', 'Process', 'About', 'Contact'].forEach(item => { %>
        <a href="#<%= item.toLowerCase() %>" class="block py-3 text-gray-300 hover:text-white transition-colors duration-300 border-b border-gray-700 last:border-b-0 transform hover:translate-x-2">
          <%= item %>
        </a>
      <% }) %>
      <a href="#contact" class="block mt-4 bg-gradient-to-r from-pink-500 to-purple-600 text-white font-semibold py-3 px-6 rounded-full text-center transition-all duration-300 hover:from-pink-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transform hover:scale-105">
        Start Project
      </a>
    </div>
  </div>
</header>

<div id="particles-js" class="absolute inset-0 z-0"></div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const header = document.querySelector('[data-header]');
    let lastScrollTop = 0;

    mobileMenuButton.addEventListener('click', function() {
      mobileMenu.classList.toggle('hidden');
      anime({
        targets: mobileMenu,
        opacity: mobileMenu.classList.contains('hidden') ? [1, 0] : [0, 1],
        translateY: mobileMenu.classList.contains('hidden') ? [0, -20] : [-20, 0],
        duration: 300,
        easing: 'easeInOutQuad'
      });
    });

    window.addEventListener('scroll', function() {
      let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      if (scrollTop > lastScrollTop) {
        anime({
          targets: header,
          translateY: [0, '-100%'],
          duration: 300,
          easing: 'easeInOutQuad'
        });
      } else {
        anime({
          targets: header,
          translateY: ['-100%', 0],
          duration: 300,
          easing: 'easeInOutQuad'
        });
      }
      lastScrollTop = scrollTop;

      if (scrollTop > 50) {
        header.classList.add('bg-gradient-to-r', 'from-indigo-900', 'to-purple-900', 'bg-opacity-90', 'backdrop-filter', 'backdrop-blur-lg', 'shadow-lg');
      } else {
        header.classList.remove('bg-gradient-to-r', 'from-indigo-900', 'to-purple-900', 'bg-opacity-90', 'backdrop-filter', 'backdrop-blur-lg', 'shadow-lg');
      }
    });

    // Smooth scrolling
    new SmoothScroll('a[href*="#"]', {
      speed: 800,
      speedAsDuration: true,
      offset: 80
    });

    // Animate logo on hover
    const logo = document.querySelector('header a.group');
    logo.addEventListener('mouseenter', () => {
      anime({
        targets: logo.querySelector('div'),
        rotate: 12,
        scale: 1.1,
        duration: 300,
        easing: 'easeInOutQuad'
      });
    });
    logo.addEventListener('mouseleave', () => {
      anime({
        targets: logo.querySelector('div'),
        rotate: 0,
        scale: 1,
        duration: 300,
        easing: 'easeInOutQuad'
      });
    });

    // Initialize AOS
    AOS.init({
      duration: 1000,
      once: true,
      offset: 100
    });

    // Initialize particles.js
    particlesJS('particles-js', {
      particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: "#ffffff" },
        shape: { type: "circle" },
        opacity: { value: 0.5, random: false },
        size: { value: 3, random: true },
        line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.4, width: 1 },
        move: { enable: true, speed: 6, direction: "none", random: false, straight: false, out_mode: "out", bounce: false }
      },
      interactivity: {
        detect_on: "canvas",
        events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: true, mode: "push" }, resize: true },
        modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
      },
      retina_detect: true
    });

    // Add 3D tilt effect to the logo
    VanillaTilt.init(document.querySelector("header a.group div"), {
      max: 25,
      speed: 400,
      glare: true,
      "max-glare": 0.5,
    });

    // Add hover effect to nav items
    const navItems = document.querySelectorAll('nav a');
    navItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        anime({
          targets: item,
          color: '#ffffff',
          scale: 1.1,
          duration: 300,
          easing: 'easeInOutQuad'
        });
      });
      item.addEventListener('mouseleave', () => {
        anime({
          targets: item,
          color: '#d1d5db',
          scale: 1,
          duration: 300,
          easing: 'easeInOutQuad'
        });
      });
    });

    // Add parallax effect to header background
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      const headerBg = document.querySelector('[data-header]');
      headerBg.style.backgroundPositionY = -(scrolled * 0.5) + 'px';
    });

    // Initialize VANTA.NET background
    VANTA.NET({
      el: "#particles-js",
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.00,
      minWidth: 200.00,
      scale: 1.00,
      scaleMobile: 1.00,
      color: 0x4f46e5,
      backgroundColor: 0x111827,
      points: 10.00,
      maxDistance: 20.00,
      spacing: 16.00
    });
  });
</script>

<style>
  @keyframes fade-in-down {
    0% {
      opacity: 0;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-down {
    animation: fade-in-down 0.3s ease-out;
  }

  header {
    transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out;
  }

  @media (max-width: 768px) {
    .container {
      max-width: 100%;
    }
  }

  /* Add a subtle text shadow to improve readability */
  header a, header span {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  /* Enhance the mobile menu button */
  #mobile-menu-button {
    transition: all 0.3s ease;
  }

  #mobile-menu-button:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  /* Add a subtle animation to the mobile menu items */
  #mobile-menu a {
    transition: all 0.3s ease;
  }

  #mobile-menu a:hover {
    padding-left: 1rem;
    background-color: rgba(255, 255, 255, 0.1);
  }

  /* Add a glowing effect to the logo */
  header a.group div {
    box-shadow: 0 0 15px rgba(79, 70, 229, 0.5);
  }

  /* Add a parallax effect to the header background */
  header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(79, 70, 229, 0.1), rgba(147, 51, 234, 0.1));
    transform: translateZ(-1px) scale(1.5);
    z-index: -1;
  }

  #particles-js {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: transparent;
    z-index: -1;
  }

  /* Add a neon glow effect to the Start Project button */
  header a[href="#contact"] {
    box-shadow: 0 0 10px rgba(236, 72, 153, 0.5);
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
  }

  /* Add a floating animation to the logo */
  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }

  header a.group div {
    animation: float 3s ease-in-out infinite;
  }

  /* Add a gradient border to the mobile menu */
  #mobile-menu {
    border-top: 4px solid;
    border-image: linear-gradient(to right, #4f46e5, #7c3aed) 1;
  }

  /* Add a pulse animation to the Start Project button */
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(236, 72, 153, 0); }
    100% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0); }
  }

  header a[href="#contact"]:hover {
    animation: pulse 1.5s infinite;
  }

  /* Add a subtle rotation to the mobile menu icon on hover */
  #mobile-menu-button:hover svg {
    transform: rotate(90deg);
    transition: transform 0.3s ease;
  }

  /* Add a scale effect to the nav items on hover */
  nav a:hover {
    transform: scale(1.05);
    transition: transform 0.3s ease;
  }

  /* Add a gradient overlay to the header on scroll */
  header.scrolled::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(17, 24, 39, 0.8), rgba(17, 24, 39, 0));
    z-index: -1;
  }

  /* Add a subtle bounce effect to the logo on page load */
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  header a.group div {
    animation: bounce 1s ease-in-out 1;
  }

  /* Add a slide-in effect for mobile menu items */
  @keyframes slideIn {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
  }

  #mobile-menu a {
    animation: slideIn 0.3s ease-out forwards;
    opacity: 0;
  }

  #mobile-menu a:nth-child(1) { animation-delay: 0.1s; }
  #mobile-menu a:nth-child(2) { animation-delay: 0.2s; }
  #mobile-menu a:nth-child(3) { animation-delay: 0.3s; }
  #mobile-menu a:nth-child(4) { animation-delay: 0.4s; }
  #mobile-menu a:nth-child(5) { animation-delay: 0.5s; }
  #mobile-menu a:nth-child(6) { animation-delay: 0.6s; }

  /* Add a shimmering effect to the logo text */
  @keyframes shimmer {
    0% { background-position: -100% 0; }
    100% { background-position: 100% 0; }
  }

  header a.group span {
    background: linear-gradient(90deg, #4f46e5, #7c3aed, #4f46e5);
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Add a ripple effect to the Start Project button */
  header a[href="#contact"] {
    position: relative;
    overflow: hidden;
  }

  header a[href="#contact"]::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s ease-out, height 0.6s ease-out;
  }

  header a[href="#contact"]:active::after {
    width: 300px;
    height: 300px;
  }

  /* Add a subtle shadow to the mobile menu */
  #mobile-menu {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  /* Improve accessibility with focus styles */
  a:focus, button:focus {
    outline: 2px solid #7c3aed;
    outline-offset: 2px;
  }

  /* Add a subtle transition to the header background */
  header {
    transition: background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
  }

  /* Enhance the mobile menu toggle animation */
  #mobile-menu-button svg {
    transition: transform 0.3s ease-in-out;
  }

  #mobile-menu-button.active svg {
    transform: rotate(180deg);
  }

  /* Add a glowing effect to the nav items on hover */
  nav a::before {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(to right, #4f46e5, #7c3aed);
    transform: scaleX(0);
    transition: transform 0.3s ease;
  }

  nav a:hover::before {
    transform: scaleX(1);
  }

  /* Add a subtle parallax effect to the particles background */
  #particles-js {
    transform: translateZ(-1px) scale(2);
    z-index: -2;
  }

  /* Enhance the mobile menu backdrop filter */
  #mobile-menu {
    backdrop-filter: blur(10px);
  }

  /* Add a subtle hover effect to the logo */
  header a.group:hover div {
    transform: rotate(12deg) scale(1.1);
  }

  /* Improve the Start Project button hover effect */
  header a[href="#contact"]:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px rgba(236, 72, 153, 0.5), 0 2px 4px -1px rgba(236, 72, 153, 0.3);
  }

  /* Add a subtle gradient animation to the header background */
  @keyframes gradientAnimation {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  header.scrolled {
    background: linear-gradient(270deg, #1f2937, #111827, #312e81);
    background-size: 600% 600%;
    animation: gradientAnimation 15s ease infinite;
  }

  /* Add a subtle scale effect to the mobile menu button */
  #mobile-menu-button:active {
    transform: scale(0.95);
  }

  /* Enhance the accessibility of the mobile menu */
  #mobile-menu:focus-within {
    outline: 2px solid #7c3aed;
  }

  /* Add a subtle transition to the nav items */
  nav a {
    transition: color 0.3s ease, transform 0.3s ease;
  }

  /* Improve the contrast of the nav items on scroll */
  header.scrolled nav a {
    color: #e5e7eb;
  }

  /* Add a subtle shadow to the header when scrolled */
  header.scrolled {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  /* Enhance the mobile menu button accessibility */
  #mobile-menu-button:focus-visible {
    outline: 2px solid #7c3aed;
    outline-offset: 2px;
  }

  /* Add a subtle transition to the mobile menu items */
  #mobile-menu a {
    transition: color 0.3s ease, transform 0.3s ease, background-color 0.3s ease;
  }

  /* Improve the hover effect of the mobile menu items */
  #mobile-menu a:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff;
  }

  /* Add a subtle scale effect to the logo on scroll */
  header.scrolled a.group div {
    transform: scale(0.9);
  }

  /* Enhance the accessibility of the Start Project button */
  header a[href="#contact"]:focus-visible {
    outline: 2px solid #7c3aed;
    outline-offset: 2px;
  }
</style>

